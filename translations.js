// Translations for the Sofia website
const translations = {
    it: {
    valutazione_100: "🌟 Genio di Sofia!",
    valutazione_80: "👏 Ottimo! Sei quasi un esperto!",
    valutazione_60: "😊 Bravo! Ma puoi fare di più!",
    valutazione_40: "😅 Non male, ma ripassa!",
    valutazione_0: "🤔 Forse Sofia è ancora un mistero per te!",
    immagine_non_disponibile: "Immagine non disponibile",
    momento_iconico: "Momento Iconico",
    // Nuove domande quiz a risposta multipla
    vai_al_quiz_completo: "Vai al quiz completo 🚀",
    quiz_score_label: "Punteggio:",
    quiz_score_home_label: "Punteggio:",
    quiz_score_of: "/",
    quiz_score_su: "su",
    quiz_score_home: "Punteggio: ",
    quiz_continue: "Continua",
    quiz_andiamo: "Sì, andiamo! 🚀",
    quiz_next: "Prossima Domanda",
    quiz_completed: "Quiz completato!",
    quiz_home_completed_title: "Quiz Home Completato",
    quiz_home_completed_text: "Hai completato la parte iniziale del quiz!",
    quiz_home_continue: "Vuoi continuare con il quiz completo?",
    quiz_home_andiamo: "Sì, andiamo! 🚀",
    quiz_home_score: "Punteggio: ",
    quiz_home_su: "su",
    quiz_home_of: "/",
    quiz_home_punteggio: "Punteggio:",
    quiz_home_torna: "Torna alla Home 🏠",
    quiz_multi_1_q: "💭 Qual è il suo soprannome più comune?",
    quiz_multi_1_opts: ["sofi-scimmietta", "sofficino", "sofcheto", "zingara"],
    quiz_multi_1_ans: [3],
    quiz_multi_2_q: "🧀 Qual è il suo formaggio preferito?",
    quiz_multi_2_opts: ["pecorino", "feta greca", "sirene", "asiago"],
    quiz_multi_2_ans: [1],
    quiz_multi_3_q: "📅 Quando si è liberata la Bulgaria dal giogo ottomano?",
    quiz_multi_3_opts: ["25-04-1945", "11-09-2001", "06-12-2003", "03-03-1878"],
    quiz_multi_3_ans: [3],
    quiz_multi_4_q: "👜 Qual è il passatempo preferito di Sofia?",
    quiz_multi_4_opts: ["leggere", "correre", "borseggiare i vecchi", "fare shopping"],
    quiz_multi_4_ans: [2],
    quiz_multi_5_q: "📖 Si legge dimìtrova o dimitròva?",
    quiz_multi_5_opts: ["Dimitròva", "Dimìtrova"],
    quiz_multi_5_ans: [0],
    quiz_multi_6_q: "🧬 Perché si chiama Sofia 'Noveli'?",
    quiz_multi_6_opts: ["in onore di un suo antenato che nella battaglia di Shipka sconfisse i turchi ottomani decimandoli", "Perché Noveli è un patronimico", "perche in bulgaro vuol dire nuova vita"],
    quiz_multi_6_ans: [1],
    quiz_multi_7_q: "🎵 Qual è il suo genere musicale preferito?",
    quiz_multi_7_opts: ["Indie", "Pubblicità di Spotify", "rock", "pop"],
    quiz_multi_7_ans: [1],
    quiz_multi_8_q: "Da piccola sofia era una (finta) pro:",
    quiz_multi_8_opts: ["Nuotatrice stile rana", "Cavallerizza", "Cestista", "Tiratrice con l’arco"],
    quiz_multi_8_ans: [1],
    quiz_multi_9_q: "Completa la frase: “chica oggi facciamo the, copertina e ____?”",
    quiz_multi_9_opts: ["Friends", "Gilmore girls", "How I met your mother", "Smallville"],
    quiz_multi_9_ans: [1],
    quiz_multi_10_q: "Uno dei tanti amori di sofia:",
    quiz_multi_10_opts: ["Doccia mattutina", "La troyota (rip)", "L’insalata greca", "Gli avocadi"],
    quiz_multi_10_ans: [1],
    quiz_multi_11_q: "It’s the most beautiful time of the year…",
    quiz_multi_11_opts: ["Natale", "Quando il Noni prepara la zuppa", "Quando i praticelli si riempiono di margherite", "È il momento di spaccare qualche uovo"],
    quiz_multi_11_ans: [0,1],
    quiz_multi_12_q: "Non è in classe, dov’è?",
    quiz_multi_12_opts: ["In bagno", "In bagno", "Quando l’Avvini chiama, Sofia risponde", "In bagno"],
    quiz_multi_12_ans: [0,1,2,3],
    quiz_multi_13_q: "Serata power point ed è subito…",
    quiz_multi_13_opts: ["Коммунизм - диктатура или справедливость?", "Che modello di auto di senti?", "Che personaggio di Shrek sei?", "PCTO e Cittadinanza"],
    quiz_multi_13_ans: [0,2],
    quiz_multi_14_q: "Sei a dormire dalla Sofi e siete tutti riuniti in salotto, che cosa ti chiede?",
    quiz_multi_14_opts: ["Guardiamo un film?", "Oh ma vi ho detto chi ho incontrario ieri?!", "Come va questo periodo? Ti senti felice?", "Battaglia di cuscini?"],
    quiz_multi_14_ans: [2],
    quiz_multi_15_q: "La zuppa del Nony é un piatto tipico:",
    quiz_multi_15_opts: ["Greco", "Francese", "Napoletano", "Romano"],
    quiz_multi_15_ans: [2],
        // Navigation
        brand: "DOTTORESSA!!!",
        momenti_iconici: "Momenti iconici",
        quanto_ne_sai: "Quanto ne sai su Sofia?",
        
        // Home page
        congratulazioni: "CONGRATULAZIONI",
        dottoressa_buco: "Dottoressa del buco del cul...",
        piccolo_assaggio: "🧠 Un piccolo assaggio del quiz...",
        video_laurea: "Il Video di Laurea",
        home_title: "Benvenuta nella tua festa di laurea!",
        home_subtitle: "Celebriamo insieme questo incredibile traguardo",
        home_description: "Oggi è il tuo giorno speciale! Hai raggiunto un obiettivo straordinario e siamo tutti qui per festeggiare con te. Questa festa è dedicata a te, ai tuoi successi e ai momenti indimenticabili che hai condiviso con tutti noi.",
        esplora_momenti: "Esplora i momenti iconici",
        gioca_quiz: "Gioca al quiz",
        
        // Home quiz
        inserisci_risposta: "Inserisci la tua risposta...",
        invia_risposta: "Invia Risposta",
        risposta_corretta: "🎉 Perfetto! Risposta corretta!",
        risposta_sbagliata: "❌ Non proprio! La risposta corretta era:",
        corretto: "Corretto! ✓",
        sbagliato: "Sbagliato ✗",
        completato_home_quiz: "🎉 Complimenti! Hai completato tutti i quiz della home!",
        completato_tutti_quiz: "🎉 Hai completato tutti i quiz su Sofia!",
        grazie_per_aver_giocato: "Grazie per aver giocato! Ora conosci Sofia ancora meglio!",
        torna_alla_home: "TORNA ALLA HOME 🏠",
        completato_tutti_quiz: "🎉 Hai completato tutti i quiz su Sofia!",
        grazie_per_aver_giocato: "Grazie per aver giocato! Ora conosci Sofia ancora meglio!",
        torna_alla_home: "TORNA ALLA HOME 🏠",
        vuoi_continuare: "Vuoi continuare con il quiz completo?",
        si_andiamo: "Sì, andiamo! 🚀",
        
        // Quiz questions for quiz.html
        
        // Photos page
        photos_title: "Gioco del Memory - Momenti Iconici",
        memory_intro: "Metti alla prova la tua memoria con i momenti più iconici di Sofia!",
        facile: "Facile (6 carte)",
        intermedio: "Intermedio (8 carte)",
        difficile: "Difficile (10 carte)",
        errori: "Errori",
        coppie_trovate: "Coppie trovate",
        gioca_ancora: "Gioca di nuovo",
        complimenti: "🎉 Complimenti! 🎉",
        hai_vinto: "Hai vinto il Memory Game! La tua memoria è fantastica!",
        game_over: "😔 Game Over",
        riprova: "Hai esaurito i tentativi. Riprova per migliorare la tua memoria!",
        tutti_momenti: "Tutti i Momenti più Iconici",
        
    // Quiz page
    quiz_title: "Quanto ne sai su Sofia?",
    quiz_subtitle: "Metti alla prova la tua conoscenza su Sofia con questo divertente quiz!",
    inizia_quiz: "Inizia il Quiz",
    domanda: "Domanda",
    di: "di",
    su: "su",
    punteggio: "Punteggio",
    punteggio_label: "Punteggio:",
    prossima_domanda: "Prossima Domanda",
    vedi_risultati: "Vedi Risultati",
    risultati_quiz: "Risultati del Quiz",
    hai_ottenuto: "Hai ottenuto",
    punti_su: "punti su",
    esperto_sofia: "🏆 Sei un vero esperto di Sofia!",
    conosci_bene: "👍 Conosci bene Sofia!",
    puoi_migliorare: "📚 Puoi migliorare la tua conoscenza su Sofia!",
    riprova_quiz: "Riprova il Quiz",
        
        // Language selector
        seleziona_lingua: "Seleziona lingua",
        
        // Login page
        benvenuti: "Benvenuti!",
        entra_sito: "Entra nel sito di Sofia",
        quanto_sai_dottoressa: "Quanto ne sai sulla neo-dottoressa?",
        frutto_preferito: "Qual è il suo frutto preferito?",
        entra: "Entra",
        risposta_sbagliata: "Risposta sbagliata, riprova!",
        
        // Music page
        musica_sofia: "Musica di Sofia",
        musica_sofia_title: "🎵 Musica che ha il Sapore di Sofia 🎵",
        musica_intro: "Le canzoni che catturano l'essenza della nostra dottoressa!",
        ascolta_tutte: "Ascolta tutte le canzoni 🎵",
        multi_answer_note: "Puoi selezionare più risposte",
    },
    
    en: {
    valutazione_100: "🌟 Sofia Genius!",
    valutazione_80: "👏 Great! You're almost an expert!",
    valutazione_60: "😊 Good! But you can do better!",
    valutazione_40: "😅 Not bad, but review!",
    valutazione_0: "🤔 Maybe Sofia is still a mystery to you!",
    immagine_non_disponibile: "Image not available",
    momento_iconico: "Iconic Moment",
    vai_al_quiz_completo: "Go to full quiz 🚀",
    quiz_score_label: "Score:",
    quiz_score_home_label: "Score:",
    quiz_score_of: "/",
    quiz_score_su: "of",
    quiz_score_home: "Score: ",
    quiz_continue: "Continue",
    quiz_andiamo: "Yes, let's go! 🚀",
    quiz_next: "Next Question",
    quiz_completed: "Quiz completed!",
    quiz_home_completed_title: "Home Quiz Completed",
    quiz_home_completed_text: "You have completed the initial part of the quiz!",
    quiz_home_continue: "Do you want to continue with the full quiz?",
    quiz_home_andiamo: "Yes, let's go! 🚀",
    quiz_home_score: "Score: ",
    quiz_home_su: "of",
    quiz_home_of: "/",
    quiz_home_punteggio: "Score:",
    quiz_home_torna: "Back to Home 🏠",
    punteggio_label: "Score:",
    // New multi-answer quiz questions
    quiz_multi_1_q: "💭 What is her most common nickname?",
    quiz_multi_1_opts: ["sofi-monkey", "sofficino", "sofcheto", "gypsy"],
    quiz_multi_1_ans: [3],
    quiz_multi_2_q: "🧀 What is her favorite cheese?",
    quiz_multi_2_opts: ["pecorino", "Greek feta", "sirene", "asiago"],
    quiz_multi_2_ans: [1],
    quiz_multi_3_q: "📅 When was Bulgaria liberated from Ottoman rule?",
    quiz_multi_3_opts: ["25-04-1945", "09-11-2001", "12-06-2003", "03-03-1878"],
    quiz_multi_3_ans: [3],
    quiz_multi_4_q: "👜 What is Sofia's favorite pastime?",
    quiz_multi_4_opts: ["reading", "running", "pickpocketing old people", "shopping"],
    quiz_multi_4_ans: [2],
    quiz_multi_5_q: "📖 Is it pronounced dimìtrova or dimitròva?",
    quiz_multi_5_opts: ["Dimitròva", "Dimìtrova"],
    quiz_multi_5_ans: [0],
    quiz_multi_6_q: "🧬 Why is Sofia called 'Noveli'?",
    quiz_multi_6_opts: ["in honor of an ancestor who defeated the Ottomans at Shipka", "Because Noveli is a patronymic", "because in Bulgarian it means new life"],
    quiz_multi_6_ans: [1],
    quiz_multi_7_q: "🎵 What is her favorite music genre?",
    quiz_multi_7_opts: ["Indie", "Spotify ads", "rock", "pop"],
    quiz_multi_7_ans: [1],
    quiz_multi_8_q: "As a child Sofia was a (fake) pro:",
    quiz_multi_8_opts: ["Breaststroke swimmer", "Horse rider", "Basketball player", "Archer"],
    quiz_multi_8_ans: [1],
    quiz_multi_9_q: "Complete the phrase: 'chica today let's do tea, blanket and ____?'",
    quiz_multi_9_opts: ["Friends", "Gilmore girls", "How I met your mother", "Smallville"],
    quiz_multi_9_ans: [1],
    quiz_multi_10_q: "One of Sofia's many loves:",
    quiz_multi_10_opts: ["Morning shower", "The troyota (rip)", "Greek salad", "Avocados"],
    quiz_multi_10_ans: [1],
    quiz_multi_11_q: "It's the most beautiful time of the year…",
    quiz_multi_11_opts: ["Christmas", "When Noni makes soup", "When the meadows fill with daisies", "It's time to crack some eggs"],
    quiz_multi_11_ans: [0,1],
    quiz_multi_12_q: "She's not in class, where is she?",
    quiz_multi_12_opts: ["In the bathroom", "In the bathroom", "When Avvini calls, Sofia answers", "In the bathroom"],
    quiz_multi_12_ans: [0,1,2,3],
    quiz_multi_13_q: "PowerPoint night and it's immediately…",
    quiz_multi_13_opts: ["Communism - dictatorship or justice?", "What car model do you feel like?", "Which Shrek character are you?", "PCTO and Citizenship"],
    quiz_multi_13_ans: [0,2],
    quiz_multi_14_q: "You're sleeping at Sofi's and everyone is in the living room, what does she ask you?",
    quiz_multi_14_opts: ["Shall we watch a movie?", "Oh, did I tell you who I met yesterday?!", "How's this period going? Are you happy?", "Pillow fight?"],
    quiz_multi_14_ans: [2],
    quiz_multi_15_q: "Nony's soup is a typical dish of:",
    quiz_multi_15_opts: ["Greek", "French", "Neapolitan", "Roman"],
    quiz_multi_15_ans: [2],
        // Navigation
        brand: "DOCTOR!!!",
        momenti_iconici: "Iconic Moments",
        quanto_ne_sai: "How well do you know Sofia?",
        
        // Home page
        congratulazioni: "CONGRATULATIONS",
        dottoressa_buco: "Doctor of the asshole",
        piccolo_assaggio: "🧠 A small taste of the quiz...",
        video_laurea: "The Graduation Video",
        home_title: "Welcome to your graduation party!",
        home_subtitle: "Let's celebrate this incredible achievement together",
        home_description: "Today is your special day! You've reached an extraordinary goal and we're all here to celebrate with you. This party is dedicated to you, your successes, and the unforgettable moments you've shared with all of us.",
        esplora_momenti: "Explore iconic moments",
        gioca_quiz: "Play the quiz",
        
        // Home quiz
        inserisci_risposta: "Enter your answer...",
        invia_risposta: "Submit Answer",
        risposta_corretta: "🎉 Perfect! Correct answer!",
        risposta_sbagliata: "❌ Not quite! The correct answer was:",
        corretto: "Correct! ✓",
        sbagliato: "Wrong ✗",
        completato_home_quiz: "🎉 Congratulations! You completed all home quizzes!",
        completato_tutti_quiz: "🎉 You completed all quizzes about Sofia!",
        grazie_per_aver_giocato: "Thank you for playing! Now you know Sofia even better!",
        torna_alla_home: "BACK TO HOME 🏠",
        vuoi_continuare: "Do you want to continue with the full quiz?",
        si_andiamo: "Yes, let's go! 🚀",
        
        // Quiz questions for quiz.html
        
        // Photos page
        photos_title: "Memory Game - Iconic Moments",
        memory_intro: "Test your memory with Sofia's most iconic moments!",
        facile: "Easy (6 cards)",
        intermedio: "Medium (8 cards)",
        difficile: "Hard (10 cards)",
        errori: "Errors",
        coppie_trovate: "Pairs found",
        gioca_ancora: "Play again",
        complimenti: "🎉 Congratulations! 🎉",
        hai_vinto: "You won the Memory Game! Your memory is fantastic!",
        game_over: "😔 Game Over",
        riprova: "You've run out of attempts. Try again to improve your memory!",
        tutti_momenti: "All the Most Iconic Moments",
        
        // Quiz page
        quiz_title: "How well do you know Sofia?",
        quiz_subtitle: "Test your knowledge about Sofia with this fun quiz!",
        inizia_quiz: "Start Quiz",
        domanda: "Question",
        di: "of",
        punteggio: "Score",
        prossima_domanda: "Next Question",
        vedi_risultati: "See Results",
        risultati_quiz: "Quiz Results",
        hai_ottenuto: "You scored",
        punti_su: "points out of",
        esperto_sofia: "🏆 You're a true Sofia expert!",
        conosci_bene: "👍 You know Sofia well!",
        puoi_migliorare: "📚 You can improve your knowledge about Sofia!",
        riprova_quiz: "Retry Quiz",
        
        // Language selector
        seleziona_lingua: "Select language",
        
        // Login page
        benvenuti: "Welcome!",
        entra_sito: "Enter Sofia's site",
        quanto_sai_dottoressa: "How much do you know about the new doctor?",
        frutto_preferito: "What is her favorite fruit?",
        entra: "Enter",
        risposta_sbagliata: "Wrong answer, try again!",
        
        // Music page
        musica_sofia: "Sofia's Music",
        musica_sofia_title: "🎵 Music with Sofia's Flavor 🎵",
        musica_intro: "Songs that capture the essence of our doctor!",
        ascolta_tutte: "Listen to all songs 🎵",
        multi_answer_note: "You can select multiple answers",
    },
    
    bg: {
    valutazione_100: "🌟 Гений на София!",
    valutazione_80: "👏 Чудесно! Почти си експерт!",
    valutazione_60: "😊 Добре! Но можеш и по-добре!",
    valutazione_40: "😅 Не е зле, но преговори!",
    valutazione_0: "🤔 Може би София все още е мистерия за теб!",
    immagine_non_disponibile: "Изображението не е налично",
    momento_iconico: "Иконичен момент",
    vai_al_quiz_completo: "Към пълния тест 🚀",
    quiz_score_label: "Резултат:",
    quiz_score_home_label: "Резултат:",
    quiz_score_of: "/",
    quiz_score_su: "от",
    quiz_score_home: "Резултат: ",
    quiz_continue: "Продължи",
    quiz_andiamo: "Да, да тръгваме! 🚀",
    quiz_next: "Следващ въпрос",
    quiz_completed: "Тестът е завършен!",
    quiz_home_completed_title: "Началният тест е завършен",
    quiz_home_completed_text: "Завърши началната част на теста!",
    quiz_home_continue: "Искаш ли да продължиш с пълния тест?",
    quiz_home_andiamo: "Да, да тръгваме! 🚀",
    quiz_home_score: "Резултат: ",
    quiz_home_su: "от",
    quiz_home_of: "/",
    quiz_home_punteggio: "Резултат:",
    quiz_home_torna: "Обратно към началото 🏠",
    punteggio_label: "Резултат:",
    // Нови въпроси с множествен избор
    quiz_multi_1_q: "💭 Какъв е най-честият ѝ прякор?",
    quiz_multi_1_opts: ["Софи-маймунка", "Софицино", "Софчето", "циганка"],
    quiz_multi_1_ans: [3],
    quiz_multi_2_q: "🧀 Какво е любимото ѝ сирене?",
    quiz_multi_2_opts: ["пекорино", "гръцко фета", "сирене", "азиако"],
    quiz_multi_2_ans: [1],
    quiz_multi_3_q: "📅 Кога е освободена България от османско владичество?",
    quiz_multi_3_opts: ["25-04-1945", "11-09-2001", "06-12-2003", "03-03-1878"],
    quiz_multi_3_ans: [3],
    quiz_multi_4_q: "👜 Какво е любимото ѝ хоби?",
    quiz_multi_4_opts: ["четене", "тичане", "да джобчосва старци", "шопинг"],
    quiz_multi_4_ans: [2],
    quiz_multi_5_q: "📖 Произнася ли се димитрова с ударение на и или на о?",
    quiz_multi_5_opts: ["Димитрòва", "Димìтрова"],
    quiz_multi_5_ans: [0],
    quiz_multi_6_q: "🧬 Защо София се казва 'Новели'?",
    quiz_multi_6_opts: ["в чест на прародител, победил турците при Шипка", "Защото Новели е патроним", "защото на български означава нов живот"],
    quiz_multi_6_ans: [1],
    quiz_multi_7_q: "🎵 Какъв е любимият ѝ музикален жанр?",
    quiz_multi_7_opts: ["Инди", "Реклами на Spotify", "рок", "поп"],
    quiz_multi_7_ans: [1],
    quiz_multi_8_q: "Като малка София беше (уж) професионалистка:",
    quiz_multi_8_opts: ["Плувкиня бруст", "Конна ездачка", "Баскетболистка", "Стрелкиня с лък"],
    quiz_multi_8_ans: [1],
    quiz_multi_9_q: "Довърши изречението: 'chica днес правим чай, одеяло и ____?'",
    quiz_multi_9_opts: ["Приятели", "Момичетата Гилмор", "Как се запознах с майка ви", "Смолвил"],
    quiz_multi_9_ans: [1],
    quiz_multi_10_q: "Една от големите любови на София:",
    quiz_multi_10_opts: ["Сутрешен душ", "Тройота (rip)", "Гръцка салата", "Авокадо"],
    quiz_multi_10_ans: [1],
    quiz_multi_11_q: "Най-красивото време на годината е…",
    quiz_multi_11_opts: ["Коледа", "Когато Нони прави супа", "Когато поляните се пълнят с маргаритки", "Време е да счупим някое яйце"],
    quiz_multi_11_ans: [0,1],
    quiz_multi_12_q: "Не е в клас, къде е?",
    quiz_multi_12_opts: ["В тоалетната", "В тоалетната", "Когато Аввини се обади, София отговаря", "В тоалетната"],
    quiz_multi_12_ans: [0,1,2,3],
    quiz_multi_13_q: "PowerPoint вечер и веднага…",
    quiz_multi_13_opts: ["Комунизъм - диктатура или справедливост?", "Какъв модел кола си?", "Кой герой от Шрек си?", "PCTO и Гражданство"],
    quiz_multi_13_ans: [0,2],
    quiz_multi_14_q: "Спиш у София и всички са в хола, какво те пита?",
    quiz_multi_14_opts: ["Да гледаме ли филм?", "О, казах ли ви кого срещнах вчера?!", "Как върви този период? Щастлив/а ли си?", "Война с възглавници?"],
    quiz_multi_14_ans: [2],
    quiz_multi_15_q: "Супата на Нони е типично ястие от:",
    quiz_multi_15_opts: ["Гръцко", "Френско", "Неаполитанско", "Римско"],
    quiz_multi_15_ans: [2],
        // Navigation
        brand: "ДОКТОРЕ!!!",
        momenti_iconici: "Знакови моменти",
        quanto_ne_sai: "Колко добре познаваш София?",
        
        // Home page
        congratulazioni: "ПОЗДРАВЛЕНИЯ",
        dottoressa_buco: "Докторка на задника",
        piccolo_assaggio: "🧠 Малка проба от теста...",
        video_laurea: "Видеото от дипломирането",
        home_title: "Добре дошла на твоята дипломна празненка!",
        home_subtitle: "Нека празнуваме заедно това невероятно постижение",
        home_description: "Днес е твоят специален ден! Постигна невероятна цел и всички ние сме тук, за да празнуваме с теб. Тази празненка е посветена на теб, на твоите успехи и на незабравимите моменти, които сподели с всички нас.",
        esplora_momenti: "Разгледай знаковите моменти",
        gioca_quiz: "Играй теста",
        
        // Home quiz
        inserisci_risposta: "Въведи отговора си...",
        invia_risposta: "Изпрати отговор",
        risposta_corretta: "🎉 Перфектно! Верен отговор!",
        risposta_sbagliata: "❌ Не точно! Правилният отговор беше:",
        corretto: "Правилно! ✓",
        sbagliato: "Грешно ✗",
        completato_home_quiz: "🎉 Поздравления! Завърши всички тестове от началото!",
        completato_tutti_quiz: "🎉 Завърши всички тестове за София!",
        grazie_per_aver_giocato: "Благодаря, че играхте! Сега познавате София още по-добре!",
        torna_alla_home: "ОБРАТНО КЪМ НАЧАЛО 🏠",
        vuoi_continuare: "Искаш ли да продължиш с пълния тест?",
        si_andiamo: "Да, да тръгваме! 🚀",
        
        // Quiz questions for quiz.html
        
        // Photos page
        photos_title: "Игра на паметта - Знакови моменти",
        memory_intro: "Тествай паметта си с най-знаковите моменти на София!",
        facile: "Лесно (6 карти)",
        intermedio: "Средно (8 карти)",
        difficile: "Трудно (10 карти)",
        errori: "Грешки",
        coppie_trovate: "Намерени двойки",
        gioca_ancora: "Играй отново",
        complimenti: "🎉 Поздравления! 🎉",
        hai_vinto: "Спечели играта на паметта! Паметта ти е фантастична!",
        game_over: "😔 Край на играта",
        riprova: "Изчерпа опитите си. Опитай пак, за да подобриш паметта си!",
        tutti_momenti: "Всички най-знакови моменти",
        
        // Quiz page
        quiz_title: "Колко добре познаваш София?",
        quiz_subtitle: "Тествай знанията си за София с този забавен тест!",
        inizia_quiz: "Започни теста",
        domanda: "Въпрос",
        di: "от",
        punteggio: "Резултат",
        prossima_domanda: "Следващ въпрос",
        vedi_risultati: "Виж резултатите",
        risultati_quiz: "Резултати от теста",
        hai_ottenuto: "Получи",
        punti_su: "точки от",
        esperto_sofia: "🏆 Ти си истински експерт по София!",
        conosci_bene: "👍 Познаваш добре София!",
        puoi_migliorare: "📚 Можеш да подобриш знанията си за София!",
        riprova_quiz: "Опитай теста отново",
        
        // Language selector
        seleziona_lingua: "Избери език",
        
        // Login page
        benvenuti: "Добре дошли!",
        entra_sito: "Влез в сайта на София",
        quanto_sai_dottoressa: "Колко знаеш за новата докторка?",
        frutto_preferito: "Какъв е любимият ѝ плод?",
        entra: "Влез",
        risposta_sbagliata: "Грешен отговор, опитай пак!",
        
        // Music page
        musica_sofia: "Музика на София",
        musica_sofia_title: "🎵 Музика със Софийски вкус 🎵",
        musica_intro: "Песните, които улавят същността на нашата докторка!",
        ascolta_tutte: "Чуй всички песни 🎵",
        multi_answer_note: "Може да избереш повече от един отговор",
    },
    
    ru: {
    valutazione_100: "🌟 Гений Софии!",
    valutazione_80: "👏 Отлично! Ты почти эксперт!",
    valutazione_60: "😊 Хорошо! Но ты можешь лучше!",
    valutazione_40: "😅 Неплохо, но повтори!",
    valutazione_0: "🤔 Возможно, София для тебя всё ещё загадка!",
    immagine_non_disponibile: "Изображение недоступно",
    momento_iconico: "Знаковый момент",
    vai_al_quiz_completo: "К полному тесту 🚀",
    quiz_score_label: "Счёт:",
    quiz_score_home_label: "Счёт:",
    quiz_score_of: "/",
    quiz_score_su: "из",
    quiz_score_home: "Счёт: ",
    quiz_continue: "Продолжить",
    quiz_andiamo: "Да, поехали! 🚀",
    quiz_next: "Следующий вопрос",
    quiz_completed: "Тест завершён!",
    quiz_home_completed_title: "Начальный тест завершён",
    quiz_home_completed_text: "Вы завершили начальную часть теста!",
    quiz_home_continue: "Хотите продолжить с полным тестом?",
    quiz_home_andiamo: "Да, поехали! 🚀",
    quiz_home_score: "Счёт: ",
    quiz_home_su: "из",
    quiz_home_of: "/",
    quiz_home_punteggio: "Счёт:",
    quiz_home_torna: "Вернуться домой 🏠",
    punteggio_label: "Счёт:",
    // Новые вопросы с множественным выбором
    quiz_multi_1_q: "💭 Какое у неё самое частое прозвище?",
    quiz_multi_1_opts: ["Софи-обезьянка", "Софи-скьиммино", "Софчето", "цыганка"],
    quiz_multi_1_ans: [3],
    quiz_multi_2_q: "🧀 Какой её любимый сыр?",
    quiz_multi_2_opts: ["пекорино", "греческая фета", "сирене", "азиако"],
    quiz_multi_2_ans: [1],
    quiz_multi_3_q: "📅 Когда Болгария освободилась от османского ига?",
    quiz_multi_3_opts: ["25-04-1945", "11-09-2001", "06-12-2003", "03-03-1878"],
    quiz_multi_3_ans: [3],
    quiz_multi_4_q: "👜 Какое у Софии любимое занятие?",
    quiz_multi_4_opts: ["читать", "бегать", "обворовывать стариков", "шоппинг"],
    quiz_multi_4_ans: [2],
    quiz_multi_5_q: "📖 Как правильно: димитрОва или дИмитрова?",
    quiz_multi_5_opts: ["Димитрòва", "Димìтрова"],
    quiz_multi_5_ans: [0],
    quiz_multi_6_q: "🧬 Почему София называется 'Новели'?",
    quiz_multi_6_opts: ["в честь предка, победившего турок при Шипке", "Потому что Новели — это патроним", "потому что по-болгарски значит новая жизнь"],
    quiz_multi_6_ans: [1],
    quiz_multi_7_q: "🎵 Какой её любимый музыкальный жанр?",
    quiz_multi_7_opts: ["Инди", "Реклама Spotify", "рок", "поп"],
    quiz_multi_7_ans: [1],
    quiz_multi_8_q: "В детстве София была (якобы) профи:",
    quiz_multi_8_opts: ["Пловчиха брассом", "Всадница", "Баскетболистка", "Лучница"],
    quiz_multi_8_ans: [1],
    quiz_multi_9_q: "Закончите фразу: 'chica сегодня делаем чай, плед и ____?'",
    quiz_multi_9_opts: ["Друзья", "Девочки Гилмор", "Как я встретил вашу маму", "Смолвиль"],
    quiz_multi_9_ans: [1],
    quiz_multi_10_q: "Одна из многих любовей Софии:",
    quiz_multi_10_opts: ["Утренний душ", "Тройота (rip)", "Греческий салат", "Авокадо"],
    quiz_multi_10_ans: [1],
    quiz_multi_11_q: "Самое прекрасное время года…",
    quiz_multi_11_opts: ["Рождество", "Когда Нони готовит суп", "Когда луга покрываются маргаритками", "Время разбить пару яиц"],
    quiz_multi_11_ans: [0,1],
    quiz_multi_12_q: "Её нет в классе, где она?",
    quiz_multi_12_opts: ["В туалете", "В туалете", "Когда звонит Аввини, София отвечает", "В туалете"],
    quiz_multi_12_ans: [0,1,2,3],
    quiz_multi_13_q: "Вечер PowerPoint и сразу…",
    quiz_multi_13_opts: ["Коммунизм — диктатура или справедливость?", "Какую машину ты чувствуешь?", "Какой ты персонаж из Шрека?", "PCTO и гражданство"],
    quiz_multi_13_ans: [0,2],
    quiz_multi_14_q: "Ты ночуешь у Софии, все в гостиной, что она спрашивает?",
    quiz_multi_14_opts: ["Посмотрим фильм?", "О, я вам рассказывала, кого встретила вчера?!", "Как у тебя дела в этот период? Ты счастлив?", "Битва подушками?"],
    quiz_multi_14_ans: [2],
    quiz_multi_15_q: "Суп Нони — типичное блюдо:",
    quiz_multi_15_opts: ["Греческое", "Французское", "Неаполитанское", "Римское"],
    quiz_multi_15_ans: [2],
        // Navigation
        brand: "ДОКТОР!!!",
        momenti_iconici: "Знаковые моменты",
        quanto_ne_sai: "Как хорошо ты знаешь Софию?",
        
        // Home page
        congratulazioni: "ПОЗДРАВЛЕНИЯ",
        dottoressa_buco: "Доктор задницы",
        piccolo_assaggio: "🧠 Небольшая проба теста...",
        video_laurea: "Видео выпуска",
        home_title: "Добро пожаловать на твой выпускной!",
        home_subtitle: "Давайте вместе отпразднуем это невероятное достижение",
        home_description: "Сегодня твой особенный день! Ты достигла невероятной цели, и мы все здесь, чтобы праздновать с тобой. Этот праздник посвящён тебе, твоим успехам и незабываемым моментам, которыми ты поделилась со всеми нами.",
        esplora_momenti: "Исследуй знаковые моменты",
        gioca_quiz: "Играй в тест",
        
        // Home quiz
        inserisci_risposta: "Введи свой ответ...",
        invia_risposta: "Отправить ответ",
        risposta_corretta: "🎉 Отлично! Правильный ответ!",
        risposta_sbagliata: "❌ Не совсем! Правильный ответ был:",
        corretto: "Правильно! ✓",
        sbagliato: "Неправильно ✗",
        completato_home_quiz: "🎉 Поздравления! Ты прошёл все тесты начала!",
        completato_tutti_quiz: "🎉 Ты прошёл все тесты о Софии!",
        grazie_per_aver_giocato: "Спасибо за игру! Теперь ты знаешь Софию ещё лучше!",
        torna_alla_home: "ВЕРНУТЬСЯ ДОМОЙ 🏠",
        completato_tutti_quiz: "🎉 Ты прошёл все тесты о Софии!",
        grazie_per_aver_giocato: "Спасибо за игру! Теперь ты знаешь Софию ещё лучше!",
        torna_alla_home: "ОБРАТНО НА ГЛАВНУЮ 🏠",
        vuoi_continuare: "Хочешь продолжить с полным тестом?",
        si_andiamo: "Да, поехали! 🚀",
        
        // Quiz questions for quiz.html
        
        // Photos page
        photos_title: "Игра на память - Знаковые моменты",
        memory_intro: "Проверь свою память с самыми знаковыми моментами Софии!",
        facile: "Лёгко (6 карт)",
        intermedio: "Средне (8 карт)",
        difficile: "Сложно (10 карт)",
        errori: "Ошибки",
        coppie_trovate: "Найденные пары",
        gioca_ancora: "Играй снова",
        complimenti: "🎉 Поздравления! 🎉",
        hai_vinto: "Ты выиграл игру на память! Твоя память фантастическая!",
        game_over: "😔 Конец игры",
        riprova: "Ты исчерпал попытки. Попробуй снова, чтобы улучшить память!",
        tutti_momenti: "Все самые знаковые моменты",
        
        // Quiz page
        quiz_title: "Как хорошо ты знаешь Софию?",
        quiz_subtitle: "Проверь свои знания о Софии с этим весёлым тестом!",
        inizia_quiz: "Начать тест",
        domanda: "Вопрос",
        di: "из",
        punteggio: "Счёт",
        prossima_domanda: "Следующий вопрос",
        vedi_risultati: "Посмотреть результаты",
        risultati_quiz: "Результаты теста",
        hai_ottenuto: "Ты получил",
        punti_su: "очков из",
        esperto_sofia: "🏆 Ты настоящий эксперт по Софии!",
        conosci_bene: "👍 Ты хорошо знаешь Софию!",
        puoi_migliorare: "📚 Ты можешь улучшить знания о Софии!",
        riprova_quiz: "Попробуй тест снова",
        
        // Language selector
        seleziona_lingua: "Выбери язык",
        
        // Login page
        benvenuti: "Добро пожаловать!",
        entra_sito: "Войди на сайт Софии",
        quanto_sai_dottoressa: "Сколько ты знаешь о новом докторе?",
        frutto_preferito: "Какой её любимый фрукт?",
        entra: "Войти",
        risposta_sbagliata: "Неправильный ответ, попробуй ещё раз!",
        
        // Music page
        musica_sofia: "Музыка Софии",
        musica_sofia_title: "🎵 Музыка со вкусом Софии 🎵",
        musica_intro: "Песни, которые отражают суть нашей докторши!",
        ascolta_tutte: "Слушать все песни 🎵",
    },
    
    fr: {
    photos_title: "Jeu de Memory - Moments iconiques",
    memory_intro: "Mets ta mémoire à l'épreuve avec les moments les plus iconiques de Sofia !",
    facile: "Facile (6 cartes)",
    intermedio: "Intermédiaire (8 cartes)",
    difficile: "Difficile (10 cartes)",
    errori: "Erreurs",
    coppie_trovate: "Paires trouvées",
    gioca_ancora: "Rejouer",
    complimenti: "🎉 Félicitations ! 🎉",
    hai_vinto: "Tu as gagné le Memory Game ! Ta mémoire est fantastique !",
    game_over: "😔 Fin de la partie",
    riprova: "Tu as épuisé tes tentatives. Réessaie pour améliorer ta mémoire !",
    tutti_momenti: "Tous les moments les plus iconiques",
    corretto: "Correct ! ✓",
    sbagliato: "Faux ✗",
    quiz_title: "Que sais-tu sur Sofia?",
    quiz_subtitle: "Teste tes connaissances sur Sofia avec ce quiz amusant!",
    inizia_quiz: "Commencer le quiz",
    domanda: "Question",
    di: "de",
    su: "sur",
    punteggio: "Score",
    punteggio_label: "Score :",
    prossima_domanda: "Question suivante",
    vedi_risultati: "Voir les résultats",
    risultati_quiz: "Résultats du quiz",
    hai_ottenuto: "Tu as obtenu",
    punti_su: "points sur",
    esperto_sofia: "🏆 Tu es un vrai expert de Sofia!",
    conosci_bene: "👍 Tu connais bien Sofia!",
    puoi_migliorare: "📚 Tu peux améliorer ta connaissance de Sofia!",
    riprova_quiz: "Refaire le quiz",
    valutazione_100: "🌟 Génie de Sofia!",
    valutazione_80: "👏 Super! Tu es presque un expert!",
    valutazione_60: "😊 Bien! Mais tu peux faire mieux!",
    valutazione_40: "😅 Pas mal, mais révise!",
    valutazione_0: "🤔 Peut-être que Sofia est encore un mystère pour toi!",
    immagine_non_disponibile: "Image non disponible",
    momento_iconico: "Moment iconique",
    vai_al_quiz_completo: "Aller au quiz complet 🚀",
    quiz_score_label: "Score :",
    quiz_score_home_label: "Score :",
    quiz_score_of: "/",
    quiz_score_su: "sur",
    quiz_score_home: "Score : ",
    quiz_continue: "Continuer",
    quiz_andiamo: "Oui, allons-y ! 🚀",
    quiz_next: "Question suivante",
    quiz_completed: "Quiz terminé !",
    quiz_home_completed_title: "Quiz d'accueil terminé",
    quiz_home_completed_text: "Tu as terminé la première partie du quiz !",
    quiz_home_continue: "Veux-tu continuer avec le quiz complet ?",
    quiz_home_andiamo: "Oui, allons-y ! 🚀",
    quiz_home_score: "Score : ",
    quiz_home_su: "sur",
    quiz_home_of: "/",
    quiz_home_punteggio: "Score :",
    quiz_home_torna: "Retour à l'accueil 🏠",
    // Nouvelles questions à choix multiples
    quiz_multi_1_q: "💭 Quel est son surnom le plus courant?",
    quiz_multi_1_opts: ["sofi-petite singe", "sofficino", "sofcheto", "gitane"],
    quiz_multi_1_ans: [3],
    quiz_multi_2_q: "🧀 Quel est son fromage préféré?",
    quiz_multi_2_opts: ["pecorino", "feta grecque", "sirene", "asiago"],
    quiz_multi_2_ans: [1],
    quiz_multi_3_q: "📅 Quand la Bulgarie a-t-elle été libérée du joug ottoman?",
    quiz_multi_3_opts: ["25-04-1945", "11-09-2001", "06-12-2003", "03-03-1878"],
    quiz_multi_3_ans: [3],
    quiz_multi_4_q: "👜 Quel est le passe-temps préféré de Sofia?",
    quiz_multi_4_opts: ["lire", "courir", "voler les vieux", "faire du shopping"],
    quiz_multi_4_ans: [2],
    quiz_multi_5_q: "📖 Est-ce qu'on dit dimìtrova ou dimitròva?",
    quiz_multi_5_opts: ["Dimitròva", "Dimìtrova"],
    quiz_multi_5_ans: [0],
    quiz_multi_6_q: "🧬 Pourquoi Sofia s'appelle-t-elle 'Noveli'?",
    quiz_multi_6_opts: ["en l'honneur d'un ancêtre qui a vaincu les Ottomans à Shipka", "Parce que Noveli est un patronyme", "parce qu'en bulgare cela signifie nouvelle vie"],
    quiz_multi_6_ans: [1],
    quiz_multi_7_q: "🎵 Quel est son genre musical préféré?",
    quiz_multi_7_opts: ["Indie", "Publicité Spotify", "rock", "pop"],
    quiz_multi_7_ans: [1],
    quiz_multi_8_q: "Petite, Sofia était une (fausse) pro:",
    quiz_multi_8_opts: ["Nageuse brasse", "Cavalière", "Basketteuse", "Archère"],
    quiz_multi_8_ans: [1],
    quiz_multi_9_q: "Complète la phrase : 'chica aujourd'hui on fait thé, couverture et ____?'",
    quiz_multi_9_opts: ["Friends", "Gilmore girls", "How I met your mother", "Smallville"],
    quiz_multi_9_ans: [1],
    quiz_multi_10_q: "Un des nombreux amours de Sofia:",
    quiz_multi_10_opts: ["Douche du matin", "La troyota (rip)", "Salade grecque", "Avocats"],
    quiz_multi_10_ans: [1],
    quiz_multi_11_q: "C'est le plus beau moment de l'année…",
    quiz_multi_11_opts: ["Noël", "Quand Nony prépare la soupe", "Quand les prés se remplissent de marguerites", "C'est le moment de casser quelques œufs"],
    quiz_multi_11_ans: [0,1],
    quiz_multi_12_q: "Elle n'est pas en classe, où est-elle ?",
    quiz_multi_12_opts: ["Aux toilettes", "Aux toilettes", "Quand Avvini appelle, Sofia répond", "Aux toilettes"],
    quiz_multi_12_ans: [0,1,2,3],
    quiz_multi_13_q: "Soirée PowerPoint et c'est tout de suite…",
    quiz_multi_13_opts: ["Communisme - dictature ou justice ?", "Quel modèle de voiture es-tu ?", "Quel personnage de Shrek es-tu ?", "PCTO et Citoyenneté"],
    quiz_multi_13_ans: [0,2],
    quiz_multi_14_q: "Tu dors chez Sofi et tout le monde est réuni dans le salon, que te demande-t-elle ?",
    quiz_multi_14_opts: ["On regarde un film ?", "Oh mais je vous ai dit qui j'ai rencontré hier ?!", "Comment ça va en ce moment ? Tu es heureux ?", "Bataille d'oreillers ?"],
    quiz_multi_14_ans: [2],
    quiz_multi_15_q: "La soupe de Nony est un plat typique :",
    quiz_multi_15_opts: ["Grec", "Français", "Napolitain", "Romain"],
    quiz_multi_15_ans: [2],
        // Navigation
        brand: "DOCTEURE!!!",
        momenti_iconici: "Moments iconiques",
        quanto_ne_sai: "Que connais-tu de Sofia?",
        
        // Home page
        congratulazioni: "FÉLICITATIONS",
        dottoressa_buco: "Docteure du trou du cul",
        piccolo_assaggio: "🧠 Un petit aperçu du quiz...",
        video_laurea: "La Vidéo de Remise de Diplôme",
        home_title: "Bienvenue à ta fête de diplôme!",
        home_subtitle: "Célébrons ensemble cette incroyable réussite",
        home_description: "Aujourd'hui c'est ton jour spécial! Tu as atteint un objectif extraordinaire et nous sommes tous là pour célébrer avec toi. Cette fête est dédiée à toi, à tes succès et aux moments inoubliables que tu as partagés avec nous tous.",
        esplora_momenti: "Explore les moments iconiques",
        gioca_quiz: "Joue au quiz",
        
        // Home quiz
        inserisci_risposta: "Saisis ta réponse...",
        invia_risposta: "Envoyer la réponse",
        risposta_corretta: "🎉 Parfait! Bonne réponse!",
        risposta_sbagliata: "❌ Pas tout à fait! La bonne réponse était:",
        completato_home_quiz: "🎉 Félicitations! Tu as terminé tous les quiz de l'accueil!",
        completato_tutti_quiz: "🎉 Tu as terminé tous les quiz sur Sofia!",
        grazie_per_aver_giocato: "Merci d'avoir joué! Maintenant tu connais Sofia encore mieux!",
        torna_alla_home: "RETOUR À L'ACCUEIL 🏠",
        vuoi_continuare: "Veux-tu continuer avec le quiz complet?",
        si_andiamo: "Oui, allons-y! 🚀",
        
        // Quiz questions for quiz.html
        
        // Language selector
        seleziona_lingua: "Choisir la langue",
        
        // Login page
        benvenuti: "Bienvenue!",
        entra_sito: "Entrer sur le site de Sofia",
        quanto_sai_dottoressa: "Que sais-tu sur la nouvelle docteure?",
        frutto_preferito: "Quel est son fruit préféré?",
        entra: "Entrer",
        risposta_sbagliata: "Mauvaise réponse, réessaie!",
        
        // Music page
        musica_sofia: "Musique de Sofia",
        musica_sofia_title: "🎵 Musique au goût de Sofia 🎵",
        musica_intro: "Les chansons qui capturent l'essence de notre docteure !",
        ascolta_tutte: "Écoute toutes les chansons 🎵",
        multi_answer_note: "Vous pouvez sélectionner plusieurs réponses",
    }
};

// Language management
class LanguageManager {
    constructor() {
        this.currentLanguage = this.getStoredLanguage() || 'it';
        this.init();
    }
    
    init() {
        this.createLanguageSelector();
        this.translatePage();
    }
    
    getStoredLanguage() {
        return localStorage.getItem('selectedLanguage');
    }
    
    setStoredLanguage(lang) {
        localStorage.setItem('selectedLanguage', lang);
    }
    
    createLanguageSelector() {
        // Find existing navbar or create language selector
        const navbar = document.querySelector('#navbar-home, #navbar-photos, #navbar-quiz, nav');
        if (!navbar) return;
        
        // Check if language selector already exists
        if (document.getElementById('language-selector')) return;
        
        const languageSelector = document.createElement('div');
        languageSelector.id = 'language-selector';
        languageSelector.className = 'language-selector';
        
        // Create responsive options
        this.updateLanguageSelectorContent(languageSelector);
        
        // Append to navbar (will be positioned with CSS)
        navbar.appendChild(languageSelector);
        
        // Add event listener
        const selectElement = languageSelector.querySelector('#language-select');
        selectElement.addEventListener('change', (e) => {
            this.changeLanguage(e.target.value);
        });
        
        // Add resize listener for responsive behavior
        window.addEventListener('resize', () => {
            this.updateLanguageSelectorContent(languageSelector);
        });
    }
    
    updateLanguageSelectorContent(container) {
        const isMobile = window.innerWidth <= 768;
        const isVerySmall = window.innerWidth <= 480;
        
        let options = '';
        if (isVerySmall) {
            // Schermi molto piccoli: solo bandiere
            options = `
                <option value="it" ${this.currentLanguage === 'it' ? 'selected' : ''}>🇮🇹</option>
                <option value="en" ${this.currentLanguage === 'en' ? 'selected' : ''}>🇬🇧</option>
                <option value="bg" ${this.currentLanguage === 'bg' ? 'selected' : ''}>🇧🇬</option>
                <option value="ru" ${this.currentLanguage === 'ru' ? 'selected' : ''}>🇷🇺</option>
                <option value="fr" ${this.currentLanguage === 'fr' ? 'selected' : ''}>🇫🇷</option>
            `;
        } else if (isMobile) {
            // Tablet/mobile: bandiere + abbreviazioni
            options = `
                <option value="it" ${this.currentLanguage === 'it' ? 'selected' : ''}>🇮🇹 IT</option>
                <option value="en" ${this.currentLanguage === 'en' ? 'selected' : ''}>🇬🇧 EN</option>
                <option value="bg" ${this.currentLanguage === 'bg' ? 'selected' : ''}>🇧🇬 BG</option>
                <option value="ru" ${this.currentLanguage === 'ru' ? 'selected' : ''}>🇷🇺 RU</option>
                <option value="fr" ${this.currentLanguage === 'fr' ? 'selected' : ''}>🇫🇷 FR</option>
            `;
        } else {
            // Desktop: bandiere + nomi completi
            options = `
                <option value="it" ${this.currentLanguage === 'it' ? 'selected' : ''}>🇮🇹 Italiano</option>
                <option value="en" ${this.currentLanguage === 'en' ? 'selected' : ''}>🇬🇧 English</option>
                <option value="bg" ${this.currentLanguage === 'bg' ? 'selected' : ''}>🇧🇬 Български</option>
                <option value="ru" ${this.currentLanguage === 'ru' ? 'selected' : ''}>🇷🇺 Русский</option>
                <option value="fr" ${this.currentLanguage === 'fr' ? 'selected' : ''}>🇫🇷 Français</option>
            `;
        }
        
        container.innerHTML = `<select id="language-select" class="language-select">${options}</select>`;
        
        // Reattach event listener
        const selectElement = container.querySelector('#language-select');
        selectElement.addEventListener('change', (e) => {
            this.changeLanguage(e.target.value);
        });
    }
    
    changeLanguage(lang) {
        this.currentLanguage = lang;
        this.setStoredLanguage(lang);
        this.translatePage();
        
        // Aggiorna il quiz della pagina quiz.html, se presente
        if (typeof window.updateQuizDisplay === 'function') {
            window.updateQuizDisplay();
        }

        // AGGIUNTA: Aggiorna i quiz della home page, se presenti
        if (typeof window.updateHomeQuizDisplay === 'function') {
            window.updateHomeQuizDisplay();
        }
    }
    
    translatePage() {
        const currentTranslations = translations[this.currentLanguage] || translations.it;
        
        // Translate elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            if (currentTranslations[key]) {
                if (element.tagName === 'INPUT' && element.type === 'button') {
                    element.value = currentTranslations[key];
                } else if (element.hasAttribute('placeholder')) {
                    element.placeholder = currentTranslations[key];
                } else {
                    element.textContent = currentTranslations[key];
                }
            }
        });
        
        // Update page title if needed
        const titleElement = document.querySelector('title');
        if (titleElement && titleElement.hasAttribute('data-translate')) {
            const key = titleElement.getAttribute('data-translate');
            if (currentTranslations[key]) {
                titleElement.textContent = currentTranslations[key];
            }
        }
    }

    // RIMUOVI la funzione updateDynamicQuizContent. La sua logica verrà spostata
    // direttamente dentro i rispettivi gestori dei quiz per una maggiore pulizia.
    /*
    updateDynamicQuizContent() {
        // ...tutto il contenuto di questa funzione va rimosso...
    }
    */
    
    translate(key) {
        const currentTranslations = translations[this.currentLanguage] || translations.it;
        return currentTranslations[key] || key;
    }
}

// Initialize language manager when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.languageManager = new LanguageManager();
});

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageManager };
}
